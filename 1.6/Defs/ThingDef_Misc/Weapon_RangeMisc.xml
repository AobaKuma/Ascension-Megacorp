<?xml version="1.0" encoding="utf-8"?>
<Defs>

  <FleckDef ParentName="FleckBase_RandomGraphic_Thrown">
    <defName>USAC_Fleck_PluserBeamBurn</defName>
    <altitudeLayer>MoteLow</altitudeLayer>
    <fadeInTime>0.1</fadeInTime>
    <solidTime>8</solidTime>
    <fadeOutTime>2</fadeOutTime>
    <randomGraphics>
      <li>
        <graphicClass>Graphic_Fleck</graphicClass>
        <texPath>Things/Mote/USAC_PluserBeam/BeamBurn_A</texPath>
        <shaderType>Transparent</shaderType>
        <drawSize>0.65</drawSize>
      </li>
      <li>
        <graphicClass>Graphic_Fleck</graphicClass>
        <texPath>Things/Mote/USAC_PluserBeam/BeamBurn_B</texPath>
        <shaderType>Transparent</shaderType>
        <drawSize>0.65</drawSize>
      </li>
      <li>
        <graphicClass>Graphic_Fleck</graphicClass>
        <texPath>Things/Mote/USAC_PluserBeam/BeamBurn_C</texPath>
        <shaderType>Transparent</shaderType>
        <drawSize>0.65</drawSize>
      </li>
    </randomGraphics>
  </FleckDef>

  <ThingDef ParentName="MoteBase">
    <defName>USAC_Mote_PluserBeamLaser</defName>
    <thingClass>MoteDualAttached</thingClass>
    <altitudeLayer>MoteOverhead</altitudeLayer>
    <mote>
      <fadeInTime>1</fadeInTime>
      <fadeOutTime>0.1</fadeOutTime>
      <solidTime>0.1</solidTime>
      <rotateTowardsTarget>True</rotateTowardsTarget>
      <scaleToConnectTargets>True</scaleToConnectTargets>
    </mote>
    <drawOffscreen>true</drawOffscreen>
    <graphicData>
      <texPath>Things/Mote/USAC_PluserBeam/PluserBeam</texPath>
      <graphicClass>Graphic_MoteWithAgeSecs</graphicClass>
      <shaderType>MoteBeam</shaderType>
      <shaderParameters>
        <_ExtraTexA>/Things/Mote/BeamSecondaryNoise_A</_ExtraTexA>
        <_ExtraTexB>/Things/Mote/BeamSecondaryNoise_B</_ExtraTexB>
        <_ScrollSpeedA>0</_ScrollSpeedA>
        <_ScrollSpeedB>0</_ScrollSpeedB>
        <_Intensity>3</_Intensity>
      </shaderParameters>
    </graphicData>
  </ThingDef>

  <ThingDef ParentName="BaseGun">
    <defName>USAC_Gun_OpticInterceptor</defName>
    <label>XM931 Pulsar II</label>
    <description>High-power pulse beam systems with low-altitude projectile interception capabilities, as well as the ability to kill conventional infantry and armored targets, are widely used as anti-drone and anti-missile interception systems on urban warfare weapon platforms.</description>
    <graphicData>
      <texPath>Things/Item/Equipment/WeaponRanged/USAC_Gun_Pluser</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <drawSize>(2,2)</drawSize>
    </graphicData>
    <statBases>
      <MarketValue>1400</MarketValue>
      <Mass>22</Mass>
      <AccuracyTouch>0.18</AccuracyTouch>
      <AccuracyShort>0.26</AccuracyShort>
      <AccuracyMedium>0.85</AccuracyMedium>
      <AccuracyLong>0.99</AccuracyLong>
      <RangedWeapon_Cooldown>2.4</RangedWeapon_Cooldown>
    </statBases>
    <techLevel>Spacer</techLevel>
    <tradeability>None</tradeability>
    <destroyOnDrop>true</destroyOnDrop>
    <weaponClasses>
      <li>RangedHeavy</li>
    </weaponClasses>
    <tools>
      <li>
        <label>barrel</label>
        <capacities>
          <li>Blunt</li>
        </capacities>
        <power>11.7</power>
        <cooldownTime>2.6</cooldownTime>
      </li>
    </tools>
    <verbs>
      <li>
        <verbClass>Verb_ShootBeam</verbClass>
        <hasStandardCommand>true</hasStandardCommand>
        <warmupTime>1.0</warmupTime>
        <range>46.9</range>
        <minRange>3.9</minRange>
        <beamFullWidthRange>3</beamFullWidthRange>
        <burstShotCount>10</burstShotCount>
        <showBurstShotStats>false</showBurstShotStats>
        <beamWidth>3</beamWidth>
        <ticksBetweenBurstShots>5</ticksBetweenBurstShots>
        <beamDamageDef>USAC_BeamPluse</beamDamageDef>
        <soundCastTail>GunTail_Medium</soundCastTail>
        <muzzleFlashScale>9</muzzleFlashScale>
        <soundCastBeam>BeamGraser_Shooting</soundCastBeam>
        <beamGroundFleckDef>USAC_Fleck_PluserBeamBurn</beamGroundFleckDef>
        <beamFleckChancePerTick>0.32</beamFleckChancePerTick>
        <beamMaxDeviation>0.75</beamMaxDeviation>
        <beamCurvature>0.5</beamCurvature>
        <beamMoteDef>USAC_Mote_PluserBeamLaser</beamMoteDef>
        <beamEndEffecterDef>USAC_PluserBeam_End</beamEndEffecterDef>
        <beamChanceToStartFire>0.05</beamChanceToStartFire>
        <beamChanceToAttachFire>0.45</beamChanceToAttachFire>
        <beamFireSizeRange>0.55~1.85</beamFireSizeRange>
        <beamLineFleckDef>Fleck_BeamSpark</beamLineFleckDef>
        <beamStartOffset>0.8</beamStartOffset>
        <beamLineFleckChanceCurve>
          <points>
            <li>(0, 0)</li>
            <li>(0.65, 1)</li>
            <li>(1, 0.75)</li>
          </points>
        </beamLineFleckChanceCurve>
      </li>
    </verbs>
    <weaponTags>
      <li>USAC_GonkWeapon</li>
    </weaponTags>
    <relicChance>0</relicChance>
  </ThingDef>

  <FleckDef ParentName="FleckBase_RandomGraphic_Thrown">
    <defName>USAC_Beam_Glow</defName>
    <altitudeLayer>LightingOverlay</altitudeLayer>
    <fadeInTime>0.01</fadeInTime>
    <solidTime>0.105</solidTime>
    <fadeOutTime>0.04</fadeOutTime>
    <randomGraphics>
      <li>
        <graphicClass>Graphic_Fleck</graphicClass>
        <texPath>Things/Mote/USAC_PluserBeam/BeamBurn_A</texPath>

        <shaderType>MoteGlow</shaderType>
        <color>(1, 1, 1, 0.75)</color>
        <drawSize>0.65</drawSize>
      </li>
      <li>
        <graphicClass>Graphic_Fleck</graphicClass>
        <texPath>Things/Mote/USAC_PluserBeam/BeamBurn_B</texPath>
        <shaderType>MoteGlow</shaderType>
        <color>(1, 1, 1, 0.75)</color>
        <drawSize>0.65</drawSize>
      </li>
      <li>
        <graphicClass>Graphic_Fleck</graphicClass>
        <texPath>Things/Mote/USAC_PluserBeam/BeamBurn_C</texPath>
        <shaderType>MoteGlow</shaderType>
        <color>(1, 1, 1, 0.75)</color>
        <drawSize>0.65</drawSize>
      </li>
    </randomGraphics>
  </FleckDef>

  <EffecterDef>
    <defName>USAC_PluserBeam_End</defName>
    <children>
      <li>
        <subEffecterClass>SubEffecter_SprayerChance</subEffecterClass>
        <moteDef>Mote_SparkThrown</moteDef>
        <spawnLocType>OnSource</spawnLocType>
        <positionLerpFactor>0.49</positionLerpFactor>
        <chancePerTick>0.2</chancePerTick>
        <scale>0.24~0.34</scale>
        <airTime>0.08~0.16</airTime>
        <rotationRate>-240~240</rotationRate>
        <speed>7.2~24</speed>
        <angle>135~225</angle>
        <positionRadius>0.02</positionRadius>
      </li>
      <li>
        <subEffecterClass>SubEffecter_SprayerChance</subEffecterClass>
        <positionRadius>0.1</positionRadius>
        <moteDef>Mote_SparkThrownFast</moteDef>
        <spawnLocType>OnSource</spawnLocType>
        <chancePerTick>0.9</chancePerTick>
        <speed>3.3~5</speed>
        <scale>0.1~0.2</scale>
        <angle>88~104</angle>
        <fleckUsesAngleForVelocity>true</fleckUsesAngleForVelocity>
      </li>
      <li>
        <subEffecterClass>SubEffecter_SprayerChance</subEffecterClass>
        <positionRadius>0.1</positionRadius>
        <spawnLocType>OnSource</spawnLocType>
        <fleckDef>USAC_Beam_Glow</fleckDef>
        <chancePerTick>0.5</chancePerTick>
        <scale>0.8</scale>
      </li>
    </children>
  </EffecterDef>


  <DamageDef>
    <defName>USAC_BeamPluse</defName>
    <label>beam</label>
    <workerClass>DamageWorker_AddInjury</workerClass>
    <externalViolence>true</externalViolence>
    <deathMessage>{0} has been beamed to death.</deathMessage>
    <hediff>BeamWound</hediff>
    <harmAllLayersUntilOutside>true</harmAllLayersUntilOutside>
    <impactSoundType>Bullet</impactSoundType>
    <armorCategory>Heat</armorCategory>
    <overkillPctToDestroyPart>0~0.7</overkillPctToDestroyPart>
    <isRanged>true</isRanged>
    <makesAnimalsFlee>true</makesAnimalsFlee>
    <defaultDamage>20</defaultDamage>
    <defaultArmorPenetration>0.5</defaultArmorPenetration>
    <buildingDamageFactorImpassable>8</buildingDamageFactorImpassable>
    <buildingDamageFactorPassable>4</buildingDamageFactorPassable>
  </DamageDef>

  <ThingDef ParentName="BaseBullet">
    <defName>USAC_Bullet_BeamPluser</defName>
    <label>pluser beam</label>
    <thingClass>Beam</thingClass>
    <graphicData>
      <texPath>Things/Projectile/Bullet_Small</texPath>
      <graphicClass>Graphic_Single</graphicClass>
    </graphicData>
    <projectile>
      <damageDef>USAC_BeamPluse</damageDef>
      <damageAmountBase>5</damageAmountBase>
      <beamMoteDef>USAC_Mote_PluserBeamLaser</beamMoteDef>
      <beamStartOffset>0.5</beamStartOffset>
      <armorPenetrationBase>0.5</armorPenetrationBase>
    </projectile>
  </ThingDef>
</Defs>